<app-header [title]="'new chat'" [componentRef]="componentRef"></app-header>
<div class="new-chat" style="background-color: hsl(0, 0%, 15%);">
  <body >
    <!-- <app-alert *ngIf="error"></app-alert> -->
    <header class="img-container">
      <ng-container *ngIf="selectedFile === undefined && !imgToShow else haveImg">
        <div style="background-image: url('/56.jpg');" class="cyrcle-img img">
        </div>
      </ng-container>
      <ng-template #haveImg>
        <img
        [src]="Transform()"
        alt="Image Preview"
        class="image-preview"
        width="103" height="103">
      </ng-template>
    </header>
    <br>
  <form style="padding: 0 15px; box-sizing: border-box;"
  [formGroup]="chatForm"
  (ngSubmit)="onSubmit(chatForm)"
  *ngIf="!isLoading">

    <mat-form-field
    class="form-content"
    appearance="outline">
      <mat-label>Name</mat-label>
      <input
      matInput
      type="text"
      formControlName="name"
      placeholder="Name"
  >
    </mat-form-field>
    <br>

    <div class="load-img-container">
      <label class="file-label" for="file">Image</label>
      <input
      class="file-input"
      id="file"
      type="file"
      placeholder="image"
      formControlName="image"
      (change)="ProcessFile($event)"
      accept="image/*"
      #fileInput>
    </div>
    <br>
    
    <mat-selection-list #selectedUsers>
      <mat-list-option (selectedChange)="onSelectedChange($event, user)" *ngFor="let user of allUsers" [value]="user">
        {{user.name}}
      </mat-list-option>
    </mat-selection-list>

    <div class='btn-container'>
      <button
      class="create-btn"
      type="submit"
      [disabled]="!chatForm.valid"
      mat-raised-button> Create Chat </button>
    </div>
  </form>
  </body>
</div>
