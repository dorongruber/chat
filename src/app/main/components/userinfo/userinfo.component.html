<app-header [title]="'user Info'"></app-header>
<main class="userInfo-container">
  <section class="header-container">
    <div class="icon-container">
      <ng-container *ngIf="user.img.name === 'emptyFile' && selectedFile === undefined else haveImg">
        <mat-icon class="icon">person_outline</mat-icon>
      </ng-container>

      <ng-template #haveImg>
        <img
        [src]="Transform()"
        alt="Image Preview"
        class="image-preview"
        width="103" height="103">
      </ng-template>
    </div>
  </section>
  <form class="form-container" [formGroup]="userForm" (ngSubmit)="onSubmit(userForm)" *ngIf="!isLoading">

  <mat-form-field
  class="form-content"
  appearance="outline">
    <mat-label>Name </mat-label>
    <input
    matInput
    type="text"
    formControlName="name"
    placeholder="Name"
    name="name">
  </mat-form-field>
  <br>

  <mat-form-field
  class="form-content"
  appearance="outline">
    <mat-label>Email </mat-label>
    <input
    matInput
    type="email"
    formControlName="email"
    placeholder="Email"
    name="email">
  </mat-form-field>
  <br>

  <mat-form-field
  class="form-content"
  appearance="outline">
    <mat-label>Phone </mat-label>
    <input
    matInput
    type="text"
    formControlName="phone"
    placeholder="Phone"
    name="phone">
  </mat-form-field>
  <br>

  <div class="load-img-container">
    <label class="file-label" for="file">Image</label>
    <input
    class="input"
    id="file"
    type="file"
    placeholder="image"
    formControlName="image"
    (change)="ProcessFile($event)"
    accept="image/*"
    #fileInput>
  </div>

  <div class='btn-container'>
    <button
    type="submit"
    [disabled]="!userForm.valid"
    mat-raised-button> update </button>
  </div>
</form>

<ng-container *ngIf="isLoading">
  <app-loading-spinner></app-loading-spinner>
</ng-container>

</main>
